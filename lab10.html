<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Мэдээнүүдийн Жагсаалт</title>
    <link rel="stylesheet" href="style10.css">
</head>
<body>
    <div class="news-list" id="newsList">
        <h2>Мэдээнүүдийн Жагсаалт</h2>
    </div>
    <script>
        const rssUrl = "https://ikon.mn/rss";
        const newsList = document.getElementById("newsList");
        <ul id="newsList">
            <li>Мэдээ 1</li>
            <li>Мэдээ 2</li>
            <li>Мэдээ 3</li>
        </ul>
        function fetchNews() {
            const xhr = new XMLHttpRequest();
            xhr.open("GET", rssUrl, true);
            xhr.responseType = "document";
            xhr.overrideMimeType("application/xml");

            xhr.onload = function () {
                if (xhr.status === 200) {
                    const items = xhr.response.querySelectorAll("item");
                    items.forEach(item => {
                        const title = item.querySelector("title").textContent;
                        const link = item.querySelector("link").textContent;

                        const newsItem = document.createElement("div");
                        newsItem.className = "news-item";
                        newsItem.innerHTML = `
                            <h3><a href="lab10Details.html?link=${encodeURIComponent(link)}">${title}</a></h3>
                        `;
                        newsList.appendChild(newsItem);
                    });
                } else {
                    newsList.innerHTML = `<p>Мэдээг татаж чадаагүй байна. Error: ${xhr.status}</p>`;
                }
            };

            xhr.onerror = function () {
                newsList.innerHTML = "<p>Сүлжээний алдаа гарлаа.</p>";
            };

            xhr.send();
        }

        fetchNews();
    </script>
</body>
</html>
